# SunFounder TFT 3.5 inch IPS TFT display

## Inatall

Quick install

```bash
curl -sSL https://raw.githubusercontent.com/sunfounder/sunfounder-installer-scripts/main/install-tft35ips.sh | sudo bash
```

Manual install

```bash
cd ~/
git clone https://github.com/sunfounder/sunfounder-tft35ips

cd ~/sunfounder-tft35ips/driver
make all
sudo make install

cd ~/sunfounder-tft35ips
sudo cp 99-calibration.conf /etc/X11/xorg.conf.d/

sudo reboot
```

## Pin definition

| Pin | Function |
| --- | --- |
| 17 | Touch Pen down |
| 25 | TFT Reset |
| 24 | TFT DC |
| 22 | Backlight |

## Debug

### Command record

```bash
# Use fbtft overlay
dtoverlay=fbtft,spi0-0,ili9486,width=480,height=320,reset_pin=25,dc_pin=24

cd ~/sunfounder-tft35ips/driver && make all && sudo make install && sudo reboot
sudo cp 99-fbturbo.conf /etc/X11/xorg.conf.d/
dtc -I dtb -O dts -o mhs35ips.dts mhs35ips-overlay.dtb

```
### ST7796 boot sequence
```
init = <0x1000011
        0x20000ff
        0x1000036 0x28
        0x100003a 0x55
        0x10000f0 0xc3
        0x10000f0 0x96
        0x10000b4 0x01
        0x10000b7 0xc6
        0x10000c0 0x80 0x45
        0x10000c1 0x13
        0x10000c2 0xa7
        0x10000c5 0x0a
        0x10000e8 0x40 0x8a 0x00 0x00 0x29 0x19 0xa5 0x33
        0x10000e0 0xd0 0x08 0x0f 0x06 0x06 0x33 0x30 0x33 0x47 0x17 0x13 0x13 0x2b 0x31
        0x10000e1 0xd0 0x0a 0x11 0x0b 0x09 0x07 0x2f 0x33 0x47 0x38 0x15 0x16 0x2c 0x32
        0x10000f0 0x3c
        0x10000f0 0x69
        0x20000ff
        0x1000021
        0x1000029>;

ST7796_SLPOUT
0x20000ff
ST7796_MADCTL 0x28
ST7796_PIXFMT 0x55
ST7796_CSCONCTL 0xc3
ST7796_CSCONCTL 0x96
ST7796_INVCTR 0x01
ST7796_EMSET 0xc6

ST7796_PWCTR1 0x80 0x45
ST7796_PWCTR2 0x13
ST7796_PWCTR3 0xa7
ST7796_VMCTR1 0x0a
ST7796_DOCACTL 0x40 0x8a 0x00 0x00 0x29 0x19 0xa5 0x33

ST7796_GMCTRP1 0xd0 0x08 0x0f 0x06 0x06 0x33 0x30 0x33 0x47 0x17 0x13 0x13 0x2b 0x31
ST7796_GMCTRN1 0xd0 0x0a 0x11 0x0b 0x09 0x07 0x2f 0x33 0x47 0x38 0x15 0x16 0x2c 0x32

ST7796_CSCONCTL 0x3c
ST7796_CSCONCTL 0x69
0x20000ff
ST7796_INVON
ST7796_DISPON
```
